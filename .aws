#!/bin/bash

export AWS_PEM_FILE='~/.aws/admin-key-pair-us-east-1b.pem'

alias aws_get_ip='aws ec2 describe-instances --query "Reservations[*].Instances[*].PublicIpAddress" --output=text'
alias aws_get_public_url='aws ec2 describe-instances --query "Reservations[*].Instances[*].PublicDnsName" --output=text'

function aws_ssh() {
	URL=$( aws_get_public_url )
	if [ -z "$URL" ]
	then 
		echo "There are no ec2 instnaces running at this time."
	else
		USER='carnd'
		cmd="ssh -v -i $AWS_PEM_FILE $USER@$URL"
		echo $cmd
		eval $cmd
	fi
}
